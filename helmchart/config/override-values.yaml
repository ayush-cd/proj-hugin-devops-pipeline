# -----------------------------------------------------
# Deployment Settings
# -----------------------------------------------------

replicaCount: 1

image:
  repository: ""   # Populated by pipeline
  pullPolicy: IfNotPresent
  tag: ""          # Populated by pipeline
  digest: ""

imagePullSecrets: []   # REQUIRED by schema

commands:
  - /bin/sh
  - -c
  - echo "Hello from AKS CI/CD Pipeline ðŸš€"; nginx -g 'daemon off;'

# -----------------------------------------------------
# Secrets injected from Azure Key Vault (Pipeline)
# -----------------------------------------------------

secret:
  enabled: true
  secrets:
    DB_URL: ""
    ACCESS_TOKEN_SECRET: ""
    REFRESH_TOKEN_SECRET: ""

# -----------------------------------------------------
# ConfigMap
# -----------------------------------------------------

configmap:
  enabled: true
  configs:
    APP_MODE: "development"
    MESSAGE: "Hello from ConfigMap ðŸ‘‹"

# -----------------------------------------------------
# Required Schema Keys
# -----------------------------------------------------

nameOverride: ""
fullnameOverride: ""

pdbMinAvailable: ""   # REQUIRED field

poddisruptionbudget:
  enabled: false
  minAvailable: 1

serviceAccount:
  enabled: false
  annotations: {}    # REQUIRED field
  name: ""           # REQUIRED field

# -----------------------------------------------------
# Networking
# -----------------------------------------------------

service:
  enabled: true
  type: LoadBalancer
  port: 80
  containerPort: 80
  targetPort: 80

ingress:
  enabled: false
  className: ""       # REQUIRED by schema
  annotations: {}     # REQUIRED by schema
  hosts:
    - host: "placeholder.local"   # REQUIRED field even if disabled
      paths:
        - path: /
          pathType: ImplementationSpecific
  tls: []             # REQUIRED field

# -----------------------------------------------------
# Autoscaling
# -----------------------------------------------------

autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 10
  targetCPUUtilizationPercentage: 80

# -----------------------------------------------------
# Pod / Security
# -----------------------------------------------------

podAnnotations: {}

podSecurityContext:
  runAsUser: 0
  runAsGroup: 0
  fsGroup: 0

securityContext:
  readOnlyRootFilesystem: false
  allowPrivilegeEscalation: false

nodeSelector:
  kubernetes.io/os: linux

tolerations: []
affinity: {}

# -----------------------------------------------------
# Resources
# -----------------------------------------------------

resources:
  limits:
    cpu: 200m
    memory: 512Mi
  requests:
    cpu: 100m
    memory: 128Mi

# -----------------------------------------------------
# Metrics (Required by schema)
# -----------------------------------------------------

metrics:
  enabled: false
  portName: "prometheus"
  port: 3001
  targetPort: 3001

# -----------------------------------------------------
# Other Options
# -----------------------------------------------------

cronJob:
  enabled: false

volume:
  enabled: false

storageClass:
  create: false

statefulSets:
  enabled: false

deploymentStrategy:
  type: Recreate

# -----------------------------------------------------
# Health checks (fixed)
# -----------------------------------------------------

healthCheckProbes:
  enabled: false
  probes: {}   # matches schema
