# -----------------------------------------------------
# Deployment Settings
# -----------------------------------------------------

replicaCount: 1

image:
  # These values will be injected dynamically by the pipeline:
  repository: ""         # Example: hugintestacr.azurecr.io/proj-hugin-backend
  pullPolicy: IfNotPresent
  tag: ""                # IMAGE_TAG from pipeline
  digest: ""

commands:
  - /bin/sh
  - -c
  - echo "Hello from AKS CI/CD Pipeline ðŸš€"; nginx -g 'daemon off;'

# -----------------------------------------------------
# Secrets from Azure Key Vault (CI/CD Injects Values)
# -----------------------------------------------------

secret:
  enabled: true
  secrets:
    DB_URL: ""
    ACCESS_TOKEN_SECRET: ""
    REFRESH_TOKEN_SECRET: ""

# -----------------------------------------------------
# ConfigMap (Optional Testing Config)
# -----------------------------------------------------

configmap:
  enabled: true
  configs:
    APP_MODE: "development"
    MESSAGE: "Hello from ConfigMap ðŸ‘‹"

# -----------------------------------------------------
# Networking
# -----------------------------------------------------

service:
  enabled: true
  type: LoadBalancer       # For Azure External IP Access
  port: 80
  containerPort: 80
  targetPort: 80

ingress:
  enabled: false           # Disabled because AWS ALB config isn't compatible with AKS

# -----------------------------------------------------
# Autoscaling
# -----------------------------------------------------

autoscaling:
  enabled: false           # Can enable later if metrics server installed
  minReplicas: 1
  maxReplicas: 10
  targetCPUUtilizationPercentage: 80

# -----------------------------------------------------
# Pod Security / Scheduling
# -----------------------------------------------------

serviceAccount:
  enabled: false

podAnnotations: {}

podSecurityContext:
  runAsUser: 0
  runAsGroup: 0
  fsGroup: 0

securityContext:
  readOnlyRootFilesystem: false
  allowPrivilegeEscalation: false

nodeSelector:
  kubernetes.io/os: linux

tolerations: []

affinity: {}

# -----------------------------------------------------
# Resource Limits
# -----------------------------------------------------

resources:
  limits:
    cpu: 200m
    memory: 512Mi
  requests:
    cpu: 100m
    memory: 128Mi

# -----------------------------------------------------
# CronJob (Disabled)
# -----------------------------------------------------

cronJob:
  enabled: false

# -----------------------------------------------------
# Storage (Disabled for now)
# -----------------------------------------------------

volume:
  enabled: false

storageClass:
  create: false

statefulSets:
  enabled: false

deploymentStrategy:
  type: Recreate
